<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0 , maximum-scale=1, user-scalable=no">
  <title>User Profile</title>
       <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nouislider@14.7.0/distribute/nouislider.min.css">
<script src="https://cdn.jsdelivr.net/npm/nouislider@14.7.0/distribute/nouislider.min.js"></script>



    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
   <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="static/my-profile.css">
    <link rel="stylesheet" type="text/css" href="static/payment.css">


    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css">


<script src="static/forgotpassword.js"></script>
        <script src="static/register.js"></script>
        <script src="static/sendemail.js"></script>
            <script src="static/my-proile.js"></script>
                <script src="static/payment.js"></script>
                    <script src="static/states-city-data.js"></script>
  <script src="static/buyer-selected.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
<body>


<div class="jumbotron jumbotron-fluid bg-success text-white text-center position-relative" style="height: 25vh;">
    <!-- Your jumbotron content goes here -->
</div>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top">
        <div class="container-fluid">

            <a class="navbar-brand" href="#">
                <div class="circular-logo">
                     <img src="static/images/logo.png" alt="Your Logo" width="120" height="120">
                </div>
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="true" aria-label="Toggle navigation" onclick="toggleLoginButton()">
                <span class="navbar-toggler-icon"></span>
            </button>

    <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item active ">
                    <a class="nav-link " href="#" > üè† Home </a>
                    <span class="stylish-header"></span>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../market/market.html"> üè¢ Market Trend</a>

                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../about-us/index.html">‚ùìAbout Us</a>
                </li>
            </ul>

        <ul class="navbar-nav ml-auto">

            <li class="nav-item2 text-center">
                    <a class="btn btn-light mx-2" href="#" data-toggle="modal" onclick="toggleForms2()" id="toggleFormsBtn2" data-target="#signInModal">Get Started</a>
            </li>
        </ul>

    </div>

           <ul class="navbar-nav ml-auto" id="loginButtonContainer">
            <li class="nav-item text-center">
                  <a class="btn btn-light mx-2" href="#" data-toggle="modal" onclick="toggleForms4()" id ="loginButton" data-target="#signInModal"> üë§Log In</a>
           </li>
            <li class="nav-item text-center" id="userProfileDropdown" style="display: none;">
                    <div class="dropdown">
                        <button class="btn btn-light mx-2 dropdown-toggle" type="button" id="userDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            üë§ Hi, <span id="userName"></span>
                        </button>
                        <div class="dropdown-menu" aria-labelledby="userDropdown">
                            <a class="dropdown-item" href="#">Profile</a>
                            <a class="dropdown-item" href="#">Dashboard</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="#" onclick="logout()">Logout</a>
                        </div>

                   </div>
            </li>
        </ul>
    </div>
</nav>

<script>
    function submitForm(event) {
  event.preventDefault();
  // You can add code here to send the form data to your email or server
  showSuccessMessage();
}

function showSuccessMessage() {
  const successMessage = document.getElementById('successMessage');
  const formContainer = document.getElementById('contactForm');

  successMessage.style.display = 'block';

  setTimeout(() => {
    successMessage.style.display = 'none';
  }, 4000); // Hide the success message after 3 seconds

  setTimeout(() => {
    formContainer.style.display = 'none';
  }, 300); // Hide the form after 1 second
}
function closeForm() {
  const formContainer = document.getElementById('contactForm');
  formContainer.style.display = 'none';
}
    function toggleLoginButton() {
        var loginButtonContainer = document.getElementById("loginButtonContainer");
        if (loginButtonContainer.style.display === "none") {
            loginButtonContainer.style.display = "block";
        } else {
            loginButtonContainer.style.display = "none";
        }
    }
</script>
<script>
 document.getElementById('CartButton').addEventListener('click', function() {
    $('#cartModal').modal('show');
  });
</script>
<div class="container profile-container">

    <div class="row g-0">
        <div class="input-group mb-3">

</div>
        <script>
    document.getElementById('searchButton').addEventListener('click', function () {
        var selectedItem = document.getElementById('itemDropdown').value;
        var typedItem = document.querySelector('.form-control').value;

        if (selectedItem && typedItem) {
            // Handle both cases: selectedItem and typedItem
             alert('Please select only one option. Either choose from the dropdown or type your own item.');
            return;
        } else if (selectedItem) {
            var selectedCropNameElement = document.getElementById('selectedcropname');
                // Change the text of the h2 element with the entered crop name
                selectedCropNameElement.innerText = selectedItem;
        } else if (typedItem) {
             var typedCropNameElement = document.getElementById('selectedcropname');
                // Change the text of the h2 element with the entered crop name
                typedCropNameElement.innerText = typedItem;
        } else {
            // Handle no selection or input
            alert('Please select an item or type your own item.');
        }


    });
</script>
        <div class="col-md-6">
            <div class="card profile-card">
                <div class="cover-image-container">
                    <img id="coverImage" src="static/images/farm1.png" alt="Cover Image" class="card-img-top cover-image">
                </div>
                <div class="card-body profile-body">
                    <h2 class="card-title profile-details" id="selectedcropname"><i class="profile-icons"></i> Singh</h2>
                    <!-- Filter By Input Group -->
                    <!-- Price Range Slider -->

                </div>
            </div>
        </div>
        <div class="col-md-6 position-relative">
            <div class="card edit-form" style="overflow-x: auto;">
                                <!-- Pagination controls -->
             <div class="background-overlay"></div>

    <div class="weather-widget" id="weather-widget">
        <div class="temperature-container" id="temperature-container">
            <div class="weather-info" id="temperature"></div>
        </div>
        <div class="location" id="location"></div>
        <div class="weather-icon-container" id="weather-icon-container">
            <div class="weather-icon" id="weather-icon"></div>
        </div>
        <div class="weather-info" id="humidity"></div>
        <div class="additional-info" id="wind-info"></div>
        <div class="forecast" id="forecast">
            <div class="arrow-container">
                <div class="left-arrow" id="moveLeftBtn"><</div>
            </div>
            <div class="forecast-container" id="forecast-container"></div>
            <div class="arrow-container">
                <div class="forecast-arrow" id="moveRightBtn">></div>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener("DOMContentLoaded", function () {
        const apiKey = 'd9566a1fcf6a4a4499a151555241302'; // Replace with your actual weatherapi.com API key
        const location = 'Noida, India'; // Replace with the farmer's location
        const moveLeftBtn = document.getElementById('moveLeftBtn');
        const moveRightBtn = document.getElementById('moveRightBtn');
        const forecastContainer = document.getElementById('forecast-container');

        let currentIndex = 0;
        const itemsPerSlide = 5;
        let data;

        // Fetch weather data from weatherapi.com API
        fetch(`https://api.weatherapi.com/v1/forecast.json?key=${apiKey}&q=${location}&days=10`) // Fetching 10 days for demonstration
            .then(response => response.json())
            .then(apiData => {
                data = apiData;
                updateWeatherInfo();
            })
            .catch(error => console.error('Error fetching weather data:', error));

        moveLeftBtn.addEventListener('click', () => {
            currentIndex = Math.max(0, currentIndex - itemsPerSlide);
            updateForecast();
        });

        moveRightBtn.addEventListener('click', () => {
            currentIndex = Math.min(data.forecast.forecastday.length - itemsPerSlide, currentIndex + itemsPerSlide);
            updateForecast();
        });

        function updateWeatherInfo() {
            const weatherIcon = document.getElementById('weather-icon');
            const temperature = document.getElementById('temperature');
            const humidity = document.getElementById('humidity');
            const location = document.getElementById('location');
            const windInfo = document.getElementById('wind-info');
                windInfo.textContent = `Wind: ${data.current.wind_kph} km/h,`;

            // Update weather icon
            weatherIcon.style.backgroundImage = `url(${data.current.condition.icon})`;

            // Update temperature and humidity
            temperature.textContent = `${data.current.temp_c}¬∞C`;
            humidity.textContent = `Humidity: ${data.current.humidity}%`;

            // Update location
            location.textContent = `Location: ${data.location.name}, ${data.location.country}`;

            // Update forecast
            updateForecast();
        }

        function updateForecast() {
            forecastContainer.innerHTML = '';

            for (let i = currentIndex; i < currentIndex + itemsPerSlide; i++) {
                const index = i % data.forecast.forecastday.length;
                const date = new Date(data.forecast.forecastday[index].date);
                const dateString = `${date.getMonth() + 1}/${date.getDate()}`;
                const temperature = data.forecast.forecastday[index].day.maxtemp_c;

                // Determine weather condition based on temperature
                let weatherCondition;
                if (temperature >= 20) {
                    weatherCondition = '‚òÄÔ∏è';
                } else if (temperature >= 20) {
                    weatherCondition = '‚òÅÔ∏è';
                } else if (temperature >= 10) {
                    weatherCondition = 'üåßÔ∏è';
                } else {
                    weatherCondition = '‚õàÔ∏è Thunderstorm';
                }

                forecastContainer.innerHTML += `<div class="forecast-item"><div class="date">${dateString}</div>${weatherCondition} <br> ${temperature}¬∞C  </div>`;
            }
        }
    });
</script>

            </div>
        </div>
    </div>
</div>
<div class="container">

<button type="button" id="CartButton">
  <i class="fas fa-cart-plus CartButton"></i>
</button>
<button type="button" id="favouritesButton">
  <i class="fas fa-star favouritesButton"></i>
</button>
</div>
<script>
 document.getElementById('CartButton').addEventListener('click', function() {
    $('#cartModal').modal('show');
  });
</script>
<div class="container profile-container">

    <div class="row g-0">
        <div class="input-group mb-3">
    <select class="custom-select" id="itemDropdown">
        <option value="" disabled selected>--Select Item--</option>
        <!-- Add your JSON data dynamically here -->
    </select>
    <div class="input-group-prepend">
        <span class="input-group-text">Or</span>
    </div>
    <input type="text" class="form-control" placeholder="Type your own item" aria-label="Type your own item" aria-describedby="searchButton">
    <div class="input-group-append">
        <button class="btn btn-primary" type="button" id="searchButton">Search</button>
    </div>
</div>
        <script>
    document.getElementById('searchButton').addEventListener('click', function () {
        var selectedItem = document.getElementById('itemDropdown').value;
        var typedItem = document.querySelector('.form-control').value;

        if (selectedItem && typedItem) {
            // Handle both cases: selectedItem and typedItem
             alert('Please select only one option. Either choose from the dropdown or type your own item.');
            return;
        } else if (selectedItem) {
            var selectedCropNameElement = document.getElementById('selectedcropname');
                // Change the text of the h2 element with the entered crop name
                selectedCropNameElement.innerText = selectedItem;
        } else if (typedItem) {
             var typedCropNameElement = document.getElementById('selectedcropname');
                // Change the text of the h2 element with the entered crop name
                typedCropNameElement.innerText = typedItem;
        } else {
            // Handle no selection or input
            alert('Please select an item or type your own item.');
        }


    });
</script>
        <div class="col-md-6">
            <div class="card profile-card">
                <div class="cover-image-container">
                    <img id="coverImage" src="static/images/farm1.png" alt="Cover Image" class="card-img-top cover-image">
                </div>
                <div class="card-body profile-body">
                    <h2 class="card-title profile-details" id="selectedcropname"><i class="profile-icons"></i> Singh</h2>
                    <!-- Filter By Input Group -->
                    <!-- Price Range Slider -->
                    <div id="price-range">
                        <label for="amount-container">Price Range:</label>
                        <div id="amount-container">
                            <div id="amount-box">
                                <span id="min-amount">Min: Rs 0</span> to
                                <span id="max-amount">Max: Rs 1000</span>
                            </div>
                        </div>
                        <div id="slider"></div>
                    </div>
                    <div id="qprice-range">
                        <label for="qamount-container">Quantity Range:</label>
                        <select id="quantity-unit">
                            <option value="Gram">Gram (g)</option>
                            <option value="kilogram">kilogram (kg)</option>
                            <option value="Quintal">Quintal (q)</option>
                        </select>
                        <div id="qamount-container">
                            <div id="qamount-box">
                                <span id="qmin-amount">Min: Rs 0</span> to
                                <span id="qmax-amount">Max: Rs 1000</span>
                            </div>
                        </div>
                        <div id="qslider"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 position-relative">
            <div class="card edit-form" style="overflow-x: auto;">
                 <h2 class="showing-results" id="connecttosellersTitle">
                    <i class="profile-icons"></i>Connect To Buyers
                </h2>

                <h6 class="showing-results" id="searchResultsTitle">
                    <i class="profile-icons"></i>Search Results
                </h6>
               <!-- Pagination controls -->
                <div class="pagination-container">
                  <button onclick="prevPage()">Previous</button>
                  <span id="currentPage">Page 1</span>
                  <span>/</span>
                  <span id="totalPages">1</span>
                  <button onclick="nextPage()">Next</button>
                </div>
                <div class="farmer-cards-container">
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Bootstrap Container -->
<div class="container">

    <!-- Responsive Dashboard Layout -->
    <div class="dashboard-container">

        <!-- Left Column - Image Upload and Detection -->
        <div class="column">

            <div class="column-title">Image Upload and Detection</div>

            <!-- Image Upload Area -->
            <div id="imageContainer">
                <div class="upload-btn-wrapper" id="uploadWrapper">
                    <button class="btn-upload" id="uploadBtn">Upload File</button>
                    <input type="file" id="imageInput" accept="image/*">
                </div>
                <img id="uploadedImage" alt="Uploaded Image">
                <button class="remove-btn" id="removeBtn" style="display: none;" onclick="removeImage()">Remove Image</button>
            </div>

            <!-- Progress Bar -->
            <div id="progressBar">
                <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
            </div>

            <!-- Detection Result Area -->
            <div id="result"></div>

            <!-- Detect Button -->
            <button class="btn" onclick="detectDisease()">Detect Disease</button>

        </div>

        <!-- Right Column - Historical Reports -->
        <div class="column">

            <div class="column-title">Historical Reports</div>

            <div class="historical-reports" id="historicalReports"></div>

        </div>

    </div>

</div>

<!-- Bootstrap JS and Popper.js -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<!-- Bootstrap JS -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<script>
    function detectDisease() {
        // Your detection logic goes here
        // You can update the result section with the actual detection results
    }

    function removeImage() {
        // Reset the image container and show the "Upload File" button
        document.getElementById('uploadedImage').src = '';
        document.getElementById('uploadWrapper').style.display = 'block';
        document.getElementById('removeBtn').style.display = 'none';
         resetProgressBar()
    }

    // Reset progress bar function
    function resetProgressBar() {
        const progressBar = document.querySelector('.progress-bar');
        progressBar.style.width = '0%';
    }

    // Handle image upload and display
     document.getElementById('imageInput').addEventListener('change', function (event) {
        const uploadedImage = document.getElementById('uploadedImage');
        const progressBar = document.querySelector('.progress-bar');
        const uploadBtn = document.getElementById('uploadBtn');
        const removeBtn = document.getElementById('removeBtn');

        const file = event.target.files[0];

        if (file) {
            resetProgressBar(); // Reset progress bar on new file selection

            const reader = new FileReader();

            reader.onloadstart = function () {
                progressBar.style.width = '0%';
            };

            reader.onprogress = function (event) {
                if (event.lengthComputable) {
                    const progress = (event.loaded / event.total) * 100;
                    progressBar.style.width = progress + '%';
                }
            };

            reader.onload = function (e) {
                progressBar.style.width = '100%';
                uploadedImage.src = e.target.result;

                // Hide "Upload File" button and show "Remove Image" button and the progress bar
                uploadBtn.style.display = 'none';
                removeBtn.style.display = 'block';
                progressBar.style.display = 'block';
            };

            reader.readAsDataURL(file);
        }
    });
</script>

<!-- Chat Modal -->

<!-- Messaging Modal -->
<!-- Messaging Modal -->
<div class="modal fade" id="messagingModal" tabindex="-1" role="dialog" aria-labelledby="messagingModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="messagingModalLabel">Messaging Modal</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-4" id="contact-list">
              <!-- Contact List -->
              <h5>Contact List</h5>
              <ul class="list-group">
                <li class="list-group-item">Contact 1</li>
                <li class="list-group-item">Contact 2</li>
                <li class="list-group-item">Contact 3</li>
                <!-- Add more contacts as needed -->
              </ul>
            </div>
            <div class="col-md-8" id="chat-container">
              <!-- Chat Container -->
              <h5>Chat</h5>
              <div class="chatcard">
                <div class="card-body" id="chat-messages">
                  <!-- Chat messages will be displayed here -->
                </div>
              </div>
              <!-- Chat input form -->
              <form id="message-form">
                <div id="message-input-group" class="form-group mt-3">
                  <input type="text" class="form-control" id="message-input" placeholder="Type your message">
                  <button type="submit" class="btn btn-primary" id="send-button">Send</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
    function toggleFavorite(icon) {
   // Toggle the color of the favorite icon on click
   icon.classList.toggle('favorite-selected');
}
</script>
<script>
    $(function() {
        var minPrice = 0;
        var maxPrice = 1000;

        var slider = document.getElementById('slider');

        noUiSlider.create(slider, {
            start: [minPrice, maxPrice],
            connect: true,
            range: {
                'min': minPrice,
                'max': maxPrice
            }
        });

         slider.noUiSlider.on('update', function(values, handle) {
            var minText = (parseInt(values[0]) === minPrice) ? 'Min' : 'Rs ' + values[0];
            var maxText = (parseInt(values[1]) === maxPrice) ? 'Max' : 'Rs ' + values[1];

            $("#min-amount").text(minText);
            $("#max-amount").text(maxText);
        });
    });
</script>

<script>
    $(function() {
        var minquantity = 0;
        var maxquantity = 1000;

        var qslider = document.getElementById('qslider');

        noUiSlider.create(qslider, {
            start: [minquantity, maxquantity],
            connect: true,
            range: {
                'min': minquantity,
                'max': maxquantity
            }
        });

        qslider.noUiSlider.on('update', function(values, handle) {
            var minText = (parseInt(values[0]) === minquantity) ? 'Min' : values[0];
            var maxText = (parseInt(values[1]) === maxquantity) ? 'Max' : values[1];

            $("#qmin-amount").text('' + minText);
            $("#qmax-amount").text('' + maxText);
        });
    });
    // Handle quantity unit change
    $("#quantity-unit").change(function() {
        var selectedUnit = $(this).val();
        console.log("Selected Quantity Unit: " + selectedUnit);
        // You can perform additional actions based on the selected unit if needed
    });
</script>
<!-- cart Delete Confirmation Modal -->
<div class="modal fade" id="addtocartModal" tabindex="-1" role="dialog" aria-labelledby="addtocartModal" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
     <div class="modal-body addtocarttext-center">
    <p class="addtocarttext-success mb-0"><i class="fas fa-cart-plus"></i> Successfully added to cart</p>
    <p class="text-danger mb-0">Go to cart <span id="addtocartItemName" class="cart-link">here</span></p>
</div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="addtocartmodalclose" data-dismiss="modal">close</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="cartModal" tabindex="-1" role="dialog" aria-labelledby="cartModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="cartModalLabel">Shopping Cart</h5>

      </div>
      <div class="modal-body">
        <!-- Cart Items List -->
        <ul id="cartItemList" class="list-group">
          <!-- Cart items will be dynamically added here -->
        </ul>
        <!-- Total Price -->
        <p class="text-right mt-3">Total: <span id="cartTotal">Rs 0</span></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="cartmodalclose" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<script>
    // Add an event listener to the "here" link
    $('#addtocartItemName').on('click', function () {
        // Show the modal when the link is clicked
        $('#cartModal').modal('show');
        $('#addtocartModal').modal('hide');

    });
    $('#cartmodalclose').on('click', function () {
        // Show the modal when the link is clicked
        $('#cartModal').modal('hide');
    });
</script>
</body>
</html>